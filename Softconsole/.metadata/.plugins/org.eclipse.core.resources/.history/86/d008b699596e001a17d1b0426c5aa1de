/*
 * fab_Nokia5110.c
 *
 *  Created on: Mar 23, 2020
 *      Author: Phoenix136
 */

#include "fab_Nokia5110.h"
#include "Nokia5110_regs.h"
#include "hal.h"
#include "hal_assert.h"


void nokia_init
(
    nokia_instance_t * nokia_inst,
    addr_t base_addr,
    uint32_t func_set,
    uint32_t disp_ctrl,
    uint32_t temp_ctrl,
    uint32_t bias_sys,
    uint32_t Vop_set
)
{
    nokia_inst->address = base_addr;
    nokia_set_reg
        (
            &nokia_inst,
            LCD_reg_func_set_ADDR,
            func_set
        );
    nokia_set_reg
        (
            &nokia_inst,
            LCD_reg_disp_ctrl_ADDR,
            disp_ctrl
        );
    nokia_set_reg
        (
            &nokia_inst,
            LCD_reg_temp_ctrl_ADDR,
            temp_ctrl
        );
    nokia_set_reg
        (
            &nokia_inst,
            LCD_reg_bias_sys_ADDR,
            bias_sys
        );
    nokia_set_reg
        (
            &nokia_inst,
            LCD_reg_Vop_set_ADDR,
            Vop_set
        );
}

uint32_t nokia_get_reg(
    nokia_instance_t * nokia_inst,
    uint32_t reg_adr
)
{
    return HW_get_32bit_reg(nokia_inst->address + reg_adr);
}

void nokia_set_reg(
    nokia_instance_t * nokia_inst,
    uint32_t reg_adr,
    uint32_t reg_val
)
{
    HW_set_32bit_reg
        (
            nokia_inst->address + reg_adr,
            (uint_fast32_t)reg_val
        );
}